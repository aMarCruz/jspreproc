{"name":"jspreproc","tagline":"C-Style source file preprocessor and comments remover for JavaScript in JavaScript","body":"[![Build Status][build-image]][build-url]\r\n[![Test Coverage][coverage-image]][coverage-url]\r\n[![npm Version][npm-image]][npm-url]\r\n[![Downloads by Month][npm-dm-image]][npm-url]\r\n[![License][license-image]][license-url]\r\n\r\n# jspreproc\r\n\r\n**Do you have this?**\r\n\r\n```js\r\n/**\r\n * The exposed tmpl function returns the template value from the cache, render with data.\r\n * @param   {string} str  - Expression or template with zero or more expressions\r\n * @param   {Object} data - For setting the context\r\n * @returns {*} Raw expression value or template to render\r\n * @private\r\n */\r\nfunction _tmpl(str, data) {\r\n  if (!str) return str  // catch falsy values here\r\n\r\n  //#if DEBUG\r\n  if (data && data._debug_) {\r\n    data._debug_ = 0\r\n    if (!_cache[str]) {\r\n      _cache[str] = _create(str, 1)  // request debug output\r\n      var rs = typeof riot === 'undefined' ?\r\n        '(riot undefined)' : JSON.stringify(riot.settings)\r\n      console.log('--- DEBUG' +\r\n        '\\n riot.settings: ' + rs + '\\n data: ' + JSON.stringify(data))\r\n    }\r\n  }\r\n  //#endif\r\n\r\n  // At this point, the expressions must have been parsed, it only remains to construct\r\n  // the function (if it is not in the cache) and call it to replace expressions with\r\n  // their values. data (`this`) is a Tag instance, logErr is the error handler.\r\n\r\n  return (_cache[str] || (_cache[str] = _create(str))).call(data, logErr)\r\n}\r\n// end of _tmpl\r\n```\r\n\r\n**And want this?**\r\n\r\n```js\r\nfunction _tmpl(str, data) {\r\n  if (!str) return str\r\n  return (_cache[str] || (_cache[str] = _create(str))).call(data, logErr)\r\n}\r\n```\r\n\r\nMe too. This is why **jspreproc**, a tiny, C-Style source file preprocessor in JavaScript for JavaScript, with duplicate empty lines and comments remover.\r\n\r\nFeaturing many of the C preprocessor characteristics through JavaScript comments, jspreproc can be used in any source with a JavaScript-like syntax, even `C#` files with some limitations.\r\n\r\n**Important:**\r\n\r\nFrom version 0.2.1-beta.1 the location of jspp.js is the bin folder.\r\n\r\nThis is work in progress, so please update jspreproc constantly, I hope the first stable version does not take too long.\r\n  \r\n\r\n## Install\r\n\r\nYou can install jspreproc with npm globally to use as the CLI tool, or locally for your project.  \r\njspreproc works in node.js 0.10.0 or above (tested in Windows 7/8, cmd and sh shells).\r\n\r\n### Command-line\r\n\r\n```sh\r\nnpm -g install jspreproc\r\n```\r\njspreproc name for command-line interface is `jspp`\r\n```sh\r\njspp [options] file1 file2 ...\r\n```\r\n\r\nMultiple files are concatenated into one, as if it had passed a file with multiple `#include` directives, one for each of the files listed.\r\n\r\nIf you don't list files, jspreproc reads from the standard input.  \r\nThe result is written to the standard output, so it can be redirected.\r\n\r\nFind more about the [options](https://github.com/aMarCruz/jspreproc/blob/master/doc/options.md) in the documentation.\r\n\r\n### node.js\r\n\r\n```sh\r\nnpm install jspreproc\r\n```\r\n```js\r\nvar jspp = require('jspreproc')\r\nvar stream = jspp(files, options)\r\n```\r\n\r\nParameter `files` can be an file name, an array of file names, or an instance of a readable stream. Options is an object with the same options from command-line.  \r\njspp return value is a [`stream.PassThrough`](https://nodejs.org/api/stream.html#stream_class_stream_passthrough) instance.\r\n\r\nYou can read about this [API](doc/API.md) in the documentation.\r\n\r\nThere is a package for bower, too.\r\n\r\n## Documentation\r\n\r\nThis is a short example of basic syntax in files prepared for jspreproc:\r\n\r\n```js\r\n//#include globals.inc\r\n//#set DEBUG = 1\r\n\r\n//#ifdef DEBUG\r\nconsole.log(result)\r\n//#endif\r\n```\r\n\r\nFind more in the [Syntax guide](https://github.com/aMarCruz/jspreproc/blob/master/doc/syntax.md).\r\n\r\nRead the [CHANGELOG](https://github.com/aMarCruz/jspreproc/blob/master/CHANGELOG.md) for recent additions and fixes.  \r\nYou can see jspreproc operation in [the tests](https://github.com/aMarCruz/jspreproc/blob/master/spec/app-spec.js).\r\n\r\n_Please note: the documentation is very much a work in progress. Contributions are welcome._\r\n\r\n### Third-party tools & libraries\r\n\r\nThe following third-party tools and libraries are used by this project:\r\n\r\n#### For regular use (dependencies installed by npm)\r\n\r\n- [minimist][] by [substack][], for parsing argument options from the command line\r\n\r\n#### Development and code quality (devDependencies)\r\n\r\n- [Jasmine][] by [Pivotal Labs][pivotal-labs], my favorite testing framework, does not rely on other frameworks\r\n- [jasmine-spec-reporter][spec-reporter] by [Bastien Caudan][Caudan], pretty console spec reporter for jasmine\r\n- [istanbul][] by [Krishnan Anantheswaran][Anantheswaran], for generating coverage information\r\n\r\nI'd like to thank all.\r\n\r\n[minimist]: https://github.com/substack/minimist \"parse argument options\"\r\n[substack]: http://substack.net/\r\n[jasmine]:  http://jasmine.github.io/ \"Jasmine, Behavior-Driven JavaScript\"\r\n[spec-reporter]: https://github.com/bcaudan/jasmine-spec-reporter\r\n[istanbul]: https://gotwarlost.github.io/istanbul/ \"a JS code coverage tool written in JS\"\r\n[Zakas]:    http://nczonline.net/\r\n[Caudan]:   https://github.com/bcaudan\r\n[Anantheswaran]: https://github.com/gotwarlost\r\n[git4win]:       https://git-for-windows.github.io/ \"The awesome Git SCM\"\r\n[code-climate]:  https://codeclimate.com/ \"A better experience for creating software\" \r\n[coverity-scan]: https://scan.coverity.com/\r\n[pivotal-labs]:  https://www.pivotaltracker.com/\r\n\r\n### Known Issues\r\nprocess.stdout fails (so jspreproc too) on console emulators for Windows, e.g. [ConEmu](https://conemu.github.io/) and others, use clean Windows prompt or [MSYS](http://www.mingw.org/wiki/msys) with mintty.\r\n\r\n### TODO\r\n\r\nMaybe some day...\r\n\r\n- ~~100% coverage (almost done)~~ (done)\r\n- Configuration from the file system. `.jspreproc.json`?\r\n- jspreproc reconfiguration through comments\r\n- `#emit`? for generating output of expression values\r\n- Better documentation\r\n\r\n---\r\n\r\n[![Coverity Scan Build Status][coverity-image]][coverity-url]\r\n[![Code Climate][climate-image]][climate-url]\r\n[![Dependencies][depend-image]][depend-url]\r\n[![Development Dependencies][devdep-image]][devdep-url]\r\n\r\n[build-image]:    https://img.shields.io/travis/aMarCruz/jspreproc.svg\r\n[build-url]:      https://travis-ci.org/aMarCruz/jspreproc\r\n[npm-image]:      https://img.shields.io/npm/v/jspreproc.svg\r\n[npm-dm-image]:   https://img.shields.io/npm/dm/jspreproc.svg\r\n[npm-url]:        https://www.npmjs.com/package/jspreproc\r\n[license-image]:  https://img.shields.io/npm/l/express.svg\r\n[license-url]:    https://github.com/aMarCruz/jspreproc/blob/master/LICENSE\r\n[coverage-image]: https://img.shields.io/codeclimate/coverage/github/aMarCruz/jspreproc.svg\r\n[coverage-url]:   https://codeclimate.com/github/aMarCruz/jspreproc/coverage\r\n\r\n[coverity-image]: https://scan.coverity.com/projects/6621/badge.svg?flat=1\r\n[coverity-url]:   https://scan.coverity.com/projects/amarcruz-jspreproc \r\n[climate-image]:  https://codeclimate.com/github/aMarCruz/jspreproc/badges/gpa.svg\r\n[climate-url]:    https://codeclimate.com/github/aMarCruz/jspreproc\r\n[depend-image]:   https://david-dm.org/aMarCruz/jspreproc.svg\r\n[depend-url]:     https://david-dm.org/aMarCruz/jspreproc\r\n[devdep-image]:   https://david-dm.org/aMarCruz/jspreproc/dev-status.svg\r\n[devdep-url]:     https://david-dm.org/aMarCruz/jspreproc#info=devDependencies\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}